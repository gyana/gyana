{% extends "web/app/project_base.html" %}
{% load humanize %}

{% block app %}

<div class="pad">
  <hgroup class="mb-4">
    <h1>Overview</h1>

    {% if project.description %}
    <p>{{ project.description }}</p>
    {% endif %}
  </hgroup>

  <div class="grid grid-cols-4 auto-rows-fr gap-7">
    <div class="card card--center flex-col">
      <h3>{{ project.num_rows|default_if_none:'0'|intcomma }}</h3>
      <p>Rows</p>
    </div>

    <div class="card card--center flex-col">
      <h3>{{ project.created|naturaltime }}</h3>
      <p>First created</p>

      <!-- This is an example "help" tooltip for a card. -->
      <div class="card__help tooltip tooltip--bottom">
        <i class="fas fa-fw fa-question"></i>

        <span class="tooltip__content">The date this project was first created</span>
      </div>
    </div>

    <div class="card card--center flex-col">
      <h3>{{ project.updated|naturaltime }}</h3>
      <p>Last update</p>
    </div>

    <div class="card card--center flex-col">
      <h3>{{ integration_count }}</h3>
      <p><a class="link"
           href="{% url 'projects:integrations:list' project.id %}">Integration{{ integration_count|pluralize }}</a>
      </p>
    </div>

    <div class="card card--center flex-col">
      <h3>{{ workflow_count }}</h3>
      <p><a class="link"
           href="{% url 'projects:workflows:list' project.id %}">Workflow{{ workflow_count|pluralize }}</a>
      </p>
    </div>

    <div class="card card--center flex-col">
      <h3>{{ dashboard_count }}</h3>
      <p><a class="link"
           href="{% url 'projects:dashboards:list' project.id %}">Dashboard{{ dashboard_count|pluralize }}</a>
      </p>
    </div>

  </div>

  {% if integration_pending > 0 %}
  <div class="bg-orange-20 p-2 rounded-lg">
    <i class="fa fa-exclamation"></i>
    Setup is incomplete for {{ integration_pending }} integration{{ integration_pending|pluralize }}
  </div>
  {% endif %}

  {% if workflow_error > 0 %}
  <div class="bg-orange-20 p-2 rounded-lg"><i class="fa fa-exclamation"></i>
    No initial run for {{ workflow_pending }} workflow{{ workflow_pending|pluralize }}</div>
  {% endif %}

  {% if workflow_error > 0 %}
  <div class="bg-red-20 p-2 rounded-lg"><i class="fa fa-exclamation"></i>
    There are errors in {{ workflow_error }} workflow{{ workflow_error|pluralize }}</div>
  {% endif %}
</div>
{% endblock %}
