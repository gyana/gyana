{% extends "web/app/project_base.html" %}
{% load render_table from django_tables2 %}
{% load humanize %}

{% block app %}

<header class="page-header">
  <div class="mr-auto">
    <h1>{{ project.name }}</h1>

    {% if project.description %}
    <p>{{ project.description }}</p>
    {% endif %}
  </div>
</header>
<div class="experiment">

  <div>
    <i class="fas fa-database fa-4x"></i>
    <h2>Integrations</h2>
    <p>Integrations are your lorem ipsum dolor sit amet</p>
  </div>

  <i class="fas fa-chevron-right fa-fw fa-3x"></i>

  <div>
    <i class="fas fa-sitemap fa-4x"></i>
    <h2>Workflows</h2>
    <p>Workflows are your lorem ipsum dolor sit amet</p>
  </div>

  <i class="fas fa-chevron-right fa-fw fa-3x"></i>

  <div>
    <i class="fas fa-chart-pie fa-4x"></i>
    <h2>Dashboards</h2>
    <p>Dashboard are your lorem ipsum dolor sit amet</p>

  </div>

</div>


<div class="flex flex-col flex-1 gap-7 pad">
  <div class="flex flex-col gap-7 flex-1">
    <div class="flex flex-wrap gap-7">
      <div class="flex-1">
        <div class="flex mb-3">
          <h3>Recent Integrations</h3>
        </div>

        <div class="card card--none flex-1">
          {% render_table integrations %}

          {% if integrations.rows|length == 0 %}
          <div class="table__empty">
            <h3>Step 1</h3>
            <p>
              <a href="{% url 'project_integrations_uploads:upload' project.id %}" class="link">Upload a CSV</a>, or
              <a href="{% url 'project_integrations:new' project.id %}" class="link">create an integration</a>
            </p>
          </div>
          {% endif %}
        </div>
      </div>

      <div class="flex-1">
        <div class="flex mb-3">
          <h3>Recent Workflows</h3>
        </div>

        <div class="card card--none flex-1">
          {% render_table workflows %}

          {% if workflows.rows|length == 0 %}
          <div class="table__empty">
            <h3>Step 2</h3>
            <form class="inline"
                  method="post"
                  action="{% url 'project_workflows:create' project.id  %}">
              {% csrf_token %}
              <input type="hidden" name="project" value="{{ project.id }}"></input>
              <p>
                Use your data to
                <button type="submit" class="link">
                  create a workflow
                </button>
              </p>
            </form>
          </div>
          {% endif %}
        </div>
      </div>
    </div>

    <div>
      <div class="flex mb-3">
        <h3>Recent Dashboards</h3>
      </div>

      <div class="card card--none flex-1">
        {% render_table dashboards %}

        {% if dashboards.rows|length == 0 %}
        <div class="table__empty">
          <h3>Step 3</h3>
          <form class="inline"
                method="post"
                action="{% url 'project_dashboards:create' project.id %}?mode=edit">
            {% csrf_token %}
            <input type="hidden" name="project" value="{{ project.id }}"></input>
            <p>
              Visualise all your data
              <button type="submit" class="link">
                in a dashboard
              </button>
            </p>
          </form>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<style>
  .experiment {
    display: flex;
    justify-content: center;
    padding: 1.6rem;
    align-items: center;
    flex: 1 1 0%;
  }

  .experiment div {
    flex-direction: column;
    display: flex;
    align-items: center;
    justify-content: center;
    max-width: 18rem;
    margin: 0 4.6rem;
  }

  .experiment div>i {
    background-color: var(--c-blue);
    color: var(--c-white);
    padding: 1.6rem;
    border-radius: 10px;
    width: 8.4rem;
    height: 8.4rem;
    display: flex;
    margin-bottom: 1.6rem;
    justify-content: center;
    align-items: center;
  }

  .experiment>i {
    margin: 0 -1.6rem;
    color: var(--c-black-20);
  }

</style>
{% endblock %}
