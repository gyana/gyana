{% extends "web/app/app_base.html" %}
{% load waffle_tags %}

{% block sidebar %}{% endblock %}

{% block app %}

<div class="flex flex-col justify-center items-center h-full">
  <div class="flex flex-col mb-7 text-center">
    <h2>Choose a plan for your team</h2>
    <p>
      Monthly paid plans will be available in the near future, for now all new
      teams are on the free plan.
    </p>
  </div>

  <div class="plan">
    <div class="card plan__card">
      <div class="">
        <h4 class="h4 text-blue mb-3">Free</h1>
        <p class="mb-auto">Get started, free forever</p>
        
        <p class="mt-8 mb-3"><span class="h1">It's free</span></p>
        <p class="mb-6"><strong>50k</strong> rows of data</p>

        <a href="{% url 'teams:detail' team.id %}" class="button button--primary w-full">
          Choose plan
        </a>
      </div>

      <hr>

      <div class="">
        <p class="mb-7">What's included?</p>

        <ul class="flex flex-col gap-7">
          <li><p> <i class="fas fa-fw fa-check text-green"></i> Up to 3 projects</p></li>
          <li><p> <i class="fas fa-fw fa-check text-green"></i> Unlimited members</p></li>
          <li><p> <i class="fas fa-fw fa-check text-green"></i> All our integrations</p></li>
          <li><p> <i class="fas fa-fw fa-check text-green"></i> Live chat support</p></li>
        </ul>
      </div>
    </div>

    <div class="card plan__card">
      <div>
        <h4 class="h4 text-blue mb-3">Pro</h1>
        <p class="mb-auto">For small teams and freelancers</p>
        
        <p class="mt-8 mb-3"><span class="h1">$30</span>/mo</p>
        <p class="mb-6"><strong>1 Million</strong> rows of data</p>

        {% flag 'subscriptions' %}
          {% if team.has_subscription %}
            {% if team.active_subscription.plan.id == paddle_pro_plan.id %}
              <button disabled class="button button--primary w-full">
                Your current plan
              </button>
            {% else %}
              <a href="{% url 'teams:subscription' team.id %}" class="button button--primary w-full">
                Downgrade to Pro
              </a>
            {% endif %}
          {% else %}
          <a href="#!" class="button button--primary w-full paddle_button"
            data-product="{{ paddle_pro_plan.id }}" data-theme="none"
            data-passthrough='{"user_id": {{ request.user.id }}, "team_id": {{ object.id }}}'>
            Upgrade to Pro
          </a>
          {% endif %}
        {% else %}
          <button class="button button--primary w-full" disabled>Available soon</button>
        {% endflag %}

      </div>

      <hr>

      <div>
        <p class="mb-7">Everything in free, plus</p>

        <ul class="flex flex-col gap-7">
          <li><p> <i class="fas fa-fw fa-check text-green"></i> Unlimited projects</p></li>
          <li><p> <i class="fas fa-fw fa-check text-green"></i> Team roles</p></li>
          <li><p> <i class="fas fa-fw fa-check text-green"></i> Unbranded dashboards</p></li>
          <li><p> <i class="fas fa-fw fa-check text-green"></i> Project permissions</p></li>
        </ul>
      </div>
    </div>

    <div class="card plan__card">
      <div>
        <h4 class="h4 text-blue mb-3">Business</h1>
        <p class="mb-auto">For growing teams and agencies</p>
        
        <p class="mt-8 mb-3"><span class="h1">$150</span>/mo</p>
        <p class="mb-6"><strong>10 Million</strong> rows of data</p>

        {% flag 'subscriptions' %}
          {% if team.has_subscription %}
            {% if team.active_subscription.plan.id == paddle_business_plan.id %}
              <button disabled class="button button--primary w-full">
                Your current plan
              </button>
            {% else %}
              <a href="{% url 'teams:subscription' team.id %}" class="button button--primary w-full">
                Upgrade to Business
              </a>
            {% endif %}
          {% else %}
            <a href="#!" class="button button--primary w-full paddle_button"
              data-product="{{ paddle_business_plan.id }}" data-theme="none"
              data-passthrough='{"user_id": {{ request.user.id }}, "team_id": {{ object.id }}}'>
              Upgrade to Business
            </a>
          {% endif %}
        {% else %}
          <button class="button button--primary w-full" disabled>Available soon</button>
        {% endflag %}
      </div>

      <hr>

      <div>
        <p class="mb-7">Everything in pro, plus</p>

        <ul class="flex flex-col gap-7">
          <li><p> <i class="fas fa-fw fa-check text-green"></i> White-label</p></li>
          <li><p> <i class="fas fa-fw fa-check text-green"></i> Custom domains</p></li>
          <li><p> <i class="fas fa-fw fa-check text-green"></i> External collaborators</p></li>
        </ul>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block page_js %}
  {% include "djpaddle_paddlejs.html" %}
  {% include "djpaddle_post_checkout.html" %}
{% endblock %}