{% extends "projects/settings_base.html" %}
{% load static %}
{% load help_utils %}

{% block app %}
  <div class="page-header">
    <h1 class="flex items-center gap-3 mr-auto">
      CSV Upload

      {% link_article 'integrations' 'upload' %}
      {% link_video 'upload' %}
    </h1>
  </div>

  <div class="upload-csv">
    <form
      method="POST"
      action="{{ request.get_full_path }}"
      class="upload-csv__form dropzone"
      enctype="multipart/form-data"
      style="background: none; border: none;"
      x-init="new SiteJS.base.Dropzone($el, {
        dictDefaultMessage: `<div>
        <span>Drop files or click here to upload<span>
        <p class='input__help-text'>Maximum upload size is 1GB</p>
        </div>`,
        maxFiles: 1,
        maxFilesize: window.__cypressMaxSize__ || 1000,
        acceptedFiles: '.csv,.tsv,text/csv,text/plain',
        success: function(file) {
        window.location.href = file.xhr.responseURL
        }
        })"
    >
      {% csrf_token %}
      {% comment %} hidden <input type="file" name="file"/> generated automatically by Dropzone {% endcomment %}
    </form>
  </div>

{% endblock %}
