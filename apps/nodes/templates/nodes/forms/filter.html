{% for label, formset in formsets.items %}
<fieldset>
  <label>{{ label }}</label>
  {% load static %}
  {% load crispy_forms_tags %}
  <div data-controller="formset" data-formset-prefix-value="{{ formset.get_default_prefix }}">
    {% comment %}
    `formset.empty_form` is an empty form with a `__prefix__` placeholder
    {% endcomment %}

    <template data-formset-target="template">
      <li>
        {% include 'components/formset_row.html' with form=formset.empty_form %}
      </li>
    </template>

    {{ formset.management_form }}
    <ul data-formset-target="target">
      {% for form in formset.forms %}
      <li>
        {% include 'components/formset_row.html' with form=form %}
      </li>
      {% endfor %}
    </ul>

    <button type="button" class="button button--sm button--outline button--rounded my-4"
            data-action="click->formset#add">
      <i class="far fa-fw fa-plus"></i> Add Filter
    </button>
  </div>

  {{ formset.media }}
</fieldset>
{% endfor %}
