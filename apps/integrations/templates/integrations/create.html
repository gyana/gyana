{% extends "web/app/project_settings_base.html" %}
{% load static %}
{% load help_utils %}
{% load waffle_tags %}

{% block app %}
<div class='flex flex-col pad'>
  <div class="flex items-center gap-3">
    <h2>Choose an integration</h2>

    {% link_article 'integrations' 'connector' %}
    {% link_video 'connector' %}
  </div>

  <div class="flex mt-7 gap-7 w-full">
    <div class="flex-none w-1/3 max-w-sm">
      <div class="connectors__sidebar sidebar card card--none">
        <nav class='sidebar__body'>
          <li>
            <a 
              href="{% url 'project_integrations:create' project.id %}"
              class="sidebar__link {% if not request.GET.category %} sidebar__link--active {% endif %}">
              All
            </a>
          </li>
          {% for category in service_categories %}
            <li>
              <a 
                href="{% url 'project_integrations:create' project.id %}?category={{ category }}"
                class="sidebar__link {% if category == request.GET.category %} sidebar__link--active {% endif %}">
                {{ category }}
              </a>
            </li>
          {% endfor %}
        </nav>
      </div>
    </div>

    <div class='flex flex-col w-full max-w-4xl space-y-4'>

      <form class="connectors__search mb-4" method="GET">
        <input type="search" name="search" value="{{ request.GET.search }}" placeholder="Search all sources" />
      </form> 

      <a class="card card--sm" href="{% url 'project_integrations_uploads:create' project.id %}">
        <div class="flex items-center gap-7">
          <i class="fas fa-fw fa-upload"></i> 
          <div class='flex-col space-y-2'>
            <h4>CSV</h4>
            <p>Upload your spreadsheets and export data from web apps.</p>
          </div>
        </div>
      </a>

      <a class="card card--sm" href="{% url 'project_integrations_sheets:create' project.id %}">
        <div class="flex items-center gap-7">
          <img style="height:2.4rem;"
            src="{% static 'images/integrations/fivetran/google_sheets.svg' %}"
              alt="Google Sheet"
          />
          <div class='flex-col space-y-2'>
            <h4>Google Sheet</h4>
            <p>Manually enter data or sync from online tools.</p>
          </div>
        </div>
      </a>

      <a class="card card--sm" href="{% url 'project_integrations_customapis:create' project.id %}">
        <div class="flex items-center gap-7">
          <i class="fas fa-fw fa-chart-pie"></i> 
          <div class='flex-col space-y-2'>
            <h4>Ad Reports</h4>
            <p>Build flexible reports for advertising platforms like Google and Facebook.</p>
          </div>
        </div>
      </a>

      <a class="card card--sm" href="{% url 'project_integrations_customapis:create' project.id %}">
        <div class="flex items-center gap-7">
          <i class="fas fa-fw fa-browser"></i> 
          <div class='flex-col space-y-2'>
            <h4>Applications</h4>
            <p>Replicate raw data from the web apps you use to run your business.</p>
          </div>
        </div>
      </a>

      <a class="card card--sm" href="{% url 'project_integrations_customapis:create' project.id %}">
        <div class="flex items-center gap-7">
          <i class="fas fa-fw fa-database"></i> 
          <div class='flex-col space-y-2'>
            <h4>Database</h4>
            <p>Replicate tables for your internal usage, product or e-commerce sites.</p>
          </div>
        </div>
      </a>

      <a class="card card--sm" href="{% url 'project_integrations_customapis:create' project.id %}">
        <div class="flex items-center gap-7">
          <i class="fas fa-fw fa-signal-stream"></i> 
          <div class='flex-col space-y-2'>
            <h4>Events</h4>
            <p>User behaviour data for your application.</p>
          </div>
        </div>
      </a>

      <a class="card card--sm" href="{% url 'project_integrations_connectors:create' project.id %}?service=webhook">
        <div class="flex items-center gap-7">
          <img style="height:2.4rem;"
            src="{% static 'images/integrations/fivetran/webhooks.svg' %}"
              alt="Webhook"
          />
          <div class='flex-col space-y-2'>
            <h4>Webhook</h4>
            <p>Push data from other applications into Gyana.</p>
          </div>
        </div>
      </a>

      {% flag 'alpha' %}
        <a class="card card--sm" href="{% url 'project_integrations_uploads:create' project.id %}">
          <div class="flex items-center gap-7">
            <i class="fas fa-fw fa-brackets-curly"></i> 
            <div class='flex-col space-y-2'>
              <h4>Custom API</h4>
              <p>Fetch data from web APIs and services with flexible options including OAuth2.</p>
            </div>
          </div>
        </a>
      {% endflag %}

      <div class="flex-1 flex flex-col space-y-4">
        <div>
          <p>{{ services_query_count }} sources</p>
        </div>
        {% for service in services_query %}
          <a class="card card--sm"
            href="{% url 'project_integrations_connectors:create' project.id %}?service={{ service.id }}">
            <div class="flex items-center gap-7">
              <img style="height:2.4rem;"
                src="{% static 'images/integrations/fivetran/'|add:service.icon_path %}"
                  alt="{{ service.name }}"
              />
              <h4>{{ service.name }}</h4>
            </div>
          </a>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
{% endblock %}