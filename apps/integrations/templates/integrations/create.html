{% extends "web/app/project_base.html" %}
{% load tailwind_filters %}

{% block app %}

<h1 class="mb-4">Create/Update</h1>

{% if request.GET.kind %}

{% if request.GET.kind == integration_kind.FIVETRAN and not request.GET.service %}
<ul>
  {% for service_id, service in services.items %}
  <a
     href="{% url 'projects:integrations:create' project.id %}?kind={{ integration_kind.FIVETRAN }}&service={{ service_id }}">
    <li>{{ service.name }}</li>
  </a>
  {% endfor %}
</ul>
{% else %}
<form method="post" action="{{ request.get_full_path }}" class="form" {% if request.GET.kind == integration_kind.CSV %}
      enctype="multipart/form-data" {% endif %}>
  {% csrf_token %} {{ form|crispy }}
  <button type="submit" class="button">Create</button>
</form>
{% endif %}
{% else %}

<div>
  <p>Choose kind:</p>

  <div class="grid grid-cols-2 gap-4">
    <a class="card card--inline"
       href="{% url 'projects:integrations:create' project.id %}?kind={{ integration_kind.GOOGLE_SHEETS }}">Google
      Sheets</a>
    <a class="card card--inline"
       href="{% url 'projects:integrations:create' project.id %}?kind={{ integration_kind.CSV }}">CSV</a>
    <a class="card card--inline"
       href="{% url 'projects:integrations:create' project.id %}?kind={{ integration_kind.FIVETRAN }}">Fivetran</a>
  </div>
</div>

{% endif %}

{% endblock %}
