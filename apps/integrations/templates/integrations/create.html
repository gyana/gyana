{% extends "web/app/project_settings_base.html" %}
{% load static %}

{% block app %}

<div class="flex flex-row flex-1 overflow-hidden">
  <div class='flex flex-col flex-1 overflow-auto'>
    <h2 class="pad">Create a new integration</h2>

    <div class='flex flex-col flex-1'>
      <div class="pad" id='create-container'>
        <form id="create-form" method="post" action="{{ request.get_full_path }}" class="form max-w-xl"
              {% if request.GET.kind == integration_kind.CONNECTOR %} data-turbo="false" {% endif %}>
          {% csrf_token %}

          {% include "django/forms/default_form.html" %}

          {% if request.GET.kind == integration_kind.UPLOAD %}
            <p>It may take a moment to upload your file. To keep the upload going, stay within the app.</p>
          {% elif request.GET.kind == integration_kind.CONNECTOR %}
            <p>You will now be redirected to Fivetran to setup your integration.</p>
          {% endif %}

          <button type="submit" class="button button--success">
            {% if request.GET.kind == integration_kind.CONNECTOR %}
              Continue
            {% else %}
              Create
            {% endif %}
          </button>
        </form>
      </div>
    </div>
  </div>

  {% if request.GET.kind == integration_kind.SHEET %}
  <div class='flex flex-shrink-0 h-full'>
    {% include 'sheets/_guide.html' %}
  </div>
  {% endif %}
  {% if request.GET.kind == integration_kind.CONNECTOR %}
  <div class='flex flex-shrink-0 h-full'>
    {% include 'connectors/guides/fivetran_guide.html' with service=services|dict_key:request.GET.service %}
  </div>
  {% endif %}
</div>

{% endblock %}
