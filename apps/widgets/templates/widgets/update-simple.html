{% load static %}

<section class="flex flex-col h-full whitespace-normal">
  <div class="workflow-detail__header">
    <turbo-frame id="widget-editable-name" class="mr-auto">
      {% include 'widgets/name.html' %}
    </turbo-frame>

    <button
      class="tf-modal__close"
      data-action="click->tf-modal#close"
      data-loading-false
    >
      <i class="fal fa-times fa-lg"></i>
    </button>
  </div>

  <div class="flex flex-col pad flex-1">
    <form 
      id="widget-update-form"
      class="widget-update-sidebar__form"
      action="{% url 'dashboard_widgets:update' project.id dashboard.id object.id %}" 
      method="post"
      data-tf-modal-target="form"
      {% if object.kind == "image" %}
      enctype='multipart/form-data'
      {% endif %}
    >  
      {% csrf_token %}

      {% comment %}
      The pressed button is outside the form this is just to trigger the submit
      {% endcomment %}
      <button
        class="hidden"
        type="submit"
        formnovalidate
        name="close"
        value="close"
      ></button>

      <span data-live-update-target="loading" class="workflow-detail__sidebar__loading hidden">
        <i class="placeholder-scr__icon fad fa-spinner-third fa-spin fa-fw fa-2x"></i>
      </span>

      {% include "django/forms/default_form.html" with optional=False %}

      <button
        type="submit"
        name="submit"
        value="Save & Close"
        class="button button--success button--filled w-full"
        data-action="click->tf-modal#forceClose"
      >
        Save
      </button>  
    </form>
  </div>
</section>