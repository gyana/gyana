{% load heroicons site_tags static %}

<div class="bg-white">
  <div class="relative max-w-7xl mx-auto py-24 px-4 sm:px-6 lg:px-8">
    <div class="sm:flex sm:flex-col sm:align-center">
      <h2 class="text-3xl font-extrabold track-tight text-gray-900">
        We're here to help
      </h1>
      <p class="mt-4 max-w-3xl text-base text-gray-800">
        We'll support you on every step of your journey to Gyana mastery.
      </p>
    </div>
    <nav aria-label="Progress" class="mt-8 lg:grid lg:grid-cols-2">
      <ol role="list">
        {% with step=request.GET.step|add:"0"|add:"0" %}
          {% for item in content.support %}
            <li class="relative pb-10">
              {% if not forloop.first %}
                <div class="-ml-px absolute mt-0.5 -top-6 left-4 w-0.5 h-1/2 {% if forloop.counter0 <= step %}bg-indigo-600{% else %}bg-gray-300{% endif %}" aria-hidden="true"></div>
              {% endif %}
              {% if not forloop.last %}
                <div class="-ml-px absolute mt-0.5 top-4 left-4 w-0.5 h-full {% if forloop.counter0 < step %}bg-indigo-600{% else %}bg-gray-300{% endif %}" aria-hidden="true"></div>
              {% endif %}
              <a href="{% url 'web:support-demo' %}?step={{ forloop.counter0 }}" class="relative flex items-start group">
                <span class="h-9 flex items-center">
                  <span class="relative z-10 w-8 h-8 flex items-center justify-center rounded-full {% if forloop.counter0 < step %}bg-indigo-600 group-hover:bg-indigo-800{% elif forloop.counter0 == step %}bg-white border-2 border-indigo-600{% else %}bg-white border-2 border-gray-300 group-hover:border-gray-400{% endif %}">
                    {% if forloop.counter0 < step %}
                      {% heroicon 'check' class="h-5 w-5 text-white" style="solid" %}
                    {% elif forloop.counter0 == step %}
                      {% heroicon item.icon class="h-5 w-5 text-indigo-600" style="solid" %}
                    {% else %}
                      {% heroicon item.icon class="h-5 w-5 text-gray-300 group-hover:text-gray-400" style="solid" %}
                    {% endif %}
                  </span>
                </span>
                <span class="ml-4 min-w-0 flex flex-col">
                  <span class="text-xs font-semibold tracking-wide uppercase">{{ item.heading }}</span>
                  <span class="text-sm text-gray-500">{{ item.description }}</span>
                </span>
              </a>
              {% if step == forloop.counter0 %}
                {% if item.note %}
                  <p class="absolute top-2 left-80 mt-4 text-xl lg:text-2xl text-caveat text-indigo-600">
                    {{ item.note }}
                  </p>
                {% endif %}
              {% endif %}
            </li>
            {% if step == forloop.counter0 %}
              <div class="overflow-hidden -mt-5 mb-5 lg:my-0 lg:absolute lg:top-16 lg:right-0 lg:w-1/2" style="height: 75vh;">
                <div class="card card--none w-full h-full relative">
                  {% if step == 0 %}
                    <iframe width="100%" height="100%" loading="lazy" sandbox="allow-scripts allow-top-navigation allow-forms allow-same-origin" src="{% url 'account_login' %}?iframe=true"></iframe>
                  {% elif step == 1 %}
                    <iframe width="100%" height="100%" src="/learn"></iframe>
                  {% endif %}
                </div>
              </div>
            {% endif %}
          {% endfor %}
        {% endwith %}
    
      </ol>
    </nav>
  </div>
</div>