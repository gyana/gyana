{% load static %}
{% load crispy_forms_tags %}
<div data-controller="formset">

  <template data-formset-target="template">
    <tr class="formset-wrapper" data-new-record>
      {% for field in formset.empty_form.visible_fields %}
      <td {% if field.name == 'DELETE' %} style="display: none;" {% endif %}>
        {# Include the hidden fields in the form #}
        {% if forloop.first %}
        {% for hidden in formset.empty_form.hidden_fields %}
        {{ hidden }}
        {% endfor %}
        {% endif %}

        {{ field }}
      </td>
      {% endfor %}
      <td>  
        <button type="button" data-action="click->formset#remove">
          <i class="far fa-fw fa-trash"></i>
        </button>
      </td>
    </tr>
  </template>

  <table>
    {{ formset.management_form }}
    <tbody data-formset-target="target">
      {% for form in formset.forms %}
      <tr class="formset-wrapper {% cycle 'row1' 'row2' %} formset_row-{{ formset.prefix }}" {% if form.DELETE.value %} style="display: none;" {% endif %}>
        {% for field in form.visible_fields %}
        <td {% if field.name == 'DELETE' %} style="display: none;" {% endif %}>
          {# Include the hidden fields in the form #}
          {% if forloop.first %}
          {% for hidden in form.hidden_fields %}
          {{ hidden }}
          {% endfor %}
          {% endif %}
          
          {% if not form.is_live %}
            {{ field.errors.as_ul }}
          {% endif %}
          {{ field }}
        </td>
        {% endfor %}
        <td>  
          <button type="button" data-action="click->formset#remove">
            <i class="far fa-fw fa-trash"></i>
          </button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <button type="button" data-action="click->formset#add">
    <i class="far fa-fw fa-plus"></i> 
  </button>
</div>