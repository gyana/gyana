{% load static %}
{% load crispy_forms_tags %}
<div data-controller="formset">

  <template data-formset-target="template">
    <tr class="form-container">
      {% for field in formset.empty_form.visible_fields %}
      <td>
        {# Include the hidden fields in the form #}
        {% if forloop.first %}
        {% for hidden in formset.empty_form.hidden_fields %}
        {{ hidden }}
        {% endfor %}
        {% endif %}

        {{ field }}
      </td>
      {% endfor %}
    </tr>
  </template>

  <table>
    {{ formset.management_form }}
    <tbody data-formset-target="target">
      {% for form in formset.forms %}
      <tr class="form-container {% cycle 'row1' 'row2' %} formset_row-{{ formset.prefix }}">
        {% for field in form.visible_fields %}
        <td>
          {# Include the hidden fields in the form #}
          {% if forloop.first %}
          {% for hidden in form.hidden_fields %}
          {{ hidden }}
          {% endfor %}
          {% endif %}
          
          {% if not form.is_live %}
            {{ field.errors.as_ul }}
          {% endif %}
          {{ field }}
        </td>
        {% endfor %}
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <button type="button" data-action="click->formset#add">
    Add todo
  </button>
</div>